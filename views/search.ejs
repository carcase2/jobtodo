<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>COAD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  </head>
  <body>
    <%- include('nav.html') %> 
    
    <div class="container input-group mb-2">
      <div>
        <h3>search 화면입니다. </h3>
      </div>
      <div>
        <input class="form-control" id="search-input">
        <button class="input-group-append btn btn-danger" id="search">검색</button>
      </div>
        <div>
          <label for="" >진행사항</label>
          <select id="job_state" name="job_state">
              <option value="전체" selected="selected">전체</option>
              <option value="진행중">진행중</option>
              <option value="완료">완료</option>
              <option value="미진행" >미진행</option>
              <option value="보류">보류</option>
          </select>
      </div>
      </div>
    <div class="container">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">제목</th>
            <th scope="col">세부내용</th>
            <th scope="col">요청날짜</th>
            <th scope="col">요청날짜</th>
            <th scope="col">마감예정날짜</th>
            <th scope="col">소요시간</th>
            <th scope="col">완료일</th>
            <th scope="col">요청자</th>
            <th scope="col">진행상태</th>
            <th scope="col">난이도</th>
            <th scope="col">비고</th>
          </tr>
        </thead>
        <tbody>
          <% for (var i = 0;i < posts.length;i++){ %> 
          <tr>
            <th scope="row"><%= posts[i]._id %></th>
            <td><%= posts[i].제목 %></td>
            <td><%= posts[i].세부내용 %></td>
            <td><%= posts[i].요청날짜 %></td>
            <td><%= posts[i].마감예정일 %></td>
            <td><%= posts[i].소요시간 %></td>
            <td><%= posts[i].완료일 %></td>
            <td><%= posts[i].요청자 %></td>
            <td><%= posts[i].진행상태 %></td>
            <td><%= posts[i].난이도 %></td>
            <td><%= posts[i].비고 %></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script>
        $('#search').click(function(){
            var input_value = $('#search-input').val();
            var state_value = $('#job_state').val()
            console.log(input_value);
            if(input_value === '')
            {
                window.location.replace('/list');    
            }
            else
            {                
                window.location.replace('/search?value=' + input_value + '&' + 'state=' + state_value);
            }
        })
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
   
  </body>
</html>
